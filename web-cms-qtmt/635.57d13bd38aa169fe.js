"use strict";(self.webpackChunkweb_cms_qtmt=self.webpackChunkweb_cms_qtmt||[]).push([[635],{635:(Q,m,o)=>{o.r(m),o.d(m,{SettingModule:()=>W});var c=o(9808),r=o(8753),t=o(5e3),d=o(8215),h=o(6254),g=o(9783),p=o(5330),f=o(5431),v=o(9269),_=o(8386),x=o(7658),C=o(7010),u=o(2382),b=o(845),y=o(5787),S=o(97);const T=["divBound"],E=["divTable"],M=["divPaginator"];function w(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onUpdate()}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",!e.has_change)}}function Z(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).onCancel()}),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("disabled",!e.has_change)}}function A(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",2,3),t.NdJ("resize",function(){return t.CHM(e),t.oxw().onWindowResize()},!1,t.Jf7),t.TgZ(2,"div",4),t._UZ(3,"p-breadcrumb",5),t.TgZ(4,"div",6)(5,"h3",7),t._UZ(6,"i",8),t._uU(7,"C\xe1c C\xe0i \u0111\u1eb7t "),t.qZA()(),t.TgZ(8,"div",9,10)(10,"div",11)(11,"div",12)(12,"label",13),t._uU(13,"Chu k\u1ef3 g\u1eedi d\u1eef li\u1ec7u (ph\xfat): "),t.qZA(),t.TgZ(14,"p-inputNumber",14),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().sent_time=n})("onInput",function(){return t.CHM(e),t.oxw().onChange()}),t.qZA()(),t.TgZ(15,"div",12)(16,"label",13),t._uU(17,"Th\u1eddi gian l\u01b0u tr\u1eef d\u1eef li\u1ec7u t\u1ed1i \u0111a (ng\xe0y): "),t.qZA(),t.TgZ(18,"p-inputNumber",14),t.NdJ("ngModelChange",function(n){return t.CHM(e),t.oxw().data_log_time=n})("onInput",function(){return t.CHM(e),t.oxw().onChange()}),t.qZA()()()()(),t.TgZ(19,"div",15,16)(21,"div",17)(22,"div",18),t.YNc(23,w,1,1,"button",19),t.YNc(24,Z,1,1,"button",20),t.qZA(),t._UZ(25,"div",21)(26,"div",22),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(3),t.Q6J("model",e.pathLinks)("home",e.homeLink),t.xp6(11),t.Q6J("ngModel",e.sent_time)("min",1)("step",1),t.xp6(4),t.Q6J("ngModel",e.data_log_time)("min",30)("step",1),t.xp6(5),t.Q6J("ngIf",e.permission.setting.update),t.xp6(1),t.Q6J("ngIf",e.permission.setting.update)}}function H(i,a){1&i&&(t._UZ(0,"i",32),t.TgZ(1,"span",33),t._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),t.qZA())}function B(i,a){if(1&i){const e=t.EpF();t.TgZ(0,"div",25)(1,"p-messages",26),t.YNc(2,H,3,0,"ng-template",27),t.qZA()(),t.TgZ(3,"div",28)(4,"div",29),t.NdJ("click",function(){return t.CHM(e),t.oxw().onGoBackHome()}),t._UZ(5,"span",30),t.TgZ(6,"span",31),t._uU(7,"Quay l\u1ea1i Trang ch\u1ee7"),t.qZA()()()}}const F=[{path:"",component:(()=>{class i{constructor(e,s,n,l,N,D,R,U){this.cHttpService=e,this.messageService=s,this.renderer=n,this.dialogService=l,this.permissionService=N,this.router=D,this.confirmService=R,this.userService=U,this.has_change=!1,this.loading=!1}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}setStyleDiv(){this.windowWidth=this.divBound.nativeElement.offsetWidth,this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-62}px`)}ngAfterViewInit(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}calcWidth(){let e="";return e=this.windowWidth<576?.95*this.windowWidth+"px":this.windowWidth>=576&&this.windowWidth<768?.55*this.windowWidth+"px":this.windowWidth>=768&&this.windowWidth<992?.45*this.windowWidth+"px":this.windowWidth>=992&&this.windowWidth<1400?.4*this.windowWidth+"px":.3*this.windowWidth+"px",e}ngOnInit(){this.myAccount=this.userService.getUserFromStorage(),this.subPermission=this.permissionService.currentPermission.subscribe(e=>{e&&(this.permission=e,this.initForm(),this.fetchDetail())})}initForm(){this.pathLinks=[{label:"Qu\u1ea3n l\xfd chung",disabled:!0},{label:"C\xe0i \u0111\u1eb7t",disabled:!0}],this.homeLink={icon:"fa-solid fa-home",routerLink:"/"}}fetchDetail(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.cHttpService.getDetail(this.myAccount.company_id).subscribe({next:e=>{200===e.status?(this.company=e.metadata,this.sent_time=this.company.sent_time,this.data_log_time=this.company.data_log_time,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)):2===e.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${e.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.message),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime))},error:e=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onChange(){this.has_change=!0}onUpdate(){this.cHttpService.config(this.company._id,this.sent_time,this.data_log_time).subscribe({next:e=>{200===e.status?this.has_change=!1:2===e.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${e.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.message))},error:e=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onCancel(){this.sent_time=this.company.sent_time,this.data_log_time=this.company.data_log_time,this.has_change=!1}onGoBackHome(){this.router.navigate(["/"])}onComeback(){localStorage.removeItem(d.o.USER),sessionStorage.removeItem(d.o.ACC),this.router.navigate(["/come-back"])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(h.n),t.Y36(g.ez),t.Y36(t.Qsj),t.Y36(p.xA),t.Y36(f.$),t.Y36(r.F0),t.Y36(v.I),t.Y36(_.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-setting-management"]],viewQuery:function(e,s){if(1&e&&(t.Gf(T,5,t.SBq),t.Gf(E,5,t.SBq),t.Gf(M,5,t.SBq)),2&e){let n;t.iGM(n=t.CRH())&&(s.divBound=n.first),t.iGM(n=t.CRH())&&(s.divTable=n.first),t.iGM(n=t.CRH())&&(s.divPaginator=n.first)}},decls:3,vars:2,consts:[["class","relative h-full w-full",3,"resize",4,"ngIf","ngIfElse"],["noPermission",""],[1,"relative","h-full","w-full",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],["styleClass","text-sm p-1",3,"model","home"],[1,"flex","align-items-center"],[1,"text-blue-700","m-0","px-2","pt-2","pb-0"],[1,"fa-solid","fa-list","mr-2"],[1,"page-content","mt-1","border-top-1","border-gray-300"],["divTable",""],[1,"p-fluid","m-2"],[1,"field","mb-2"],["for","name"],["mode","decimal",3,"ngModel","min","step","ngModelChange","onInput"],[1,"absolute","bottom-0","left-0","w-full","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],["pButton","","pRipple","","type","button","label","C\u1eadp nh\u1eadt","icon","fa-solid fa-edit","class","mx-1",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times","class","mr-1",3,"disabled","click",4,"ngIf"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","label","C\u1eadp nh\u1eadt","icon","fa-solid fa-edit",1,"mx-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"mr-1",3,"disabled","click"],[1,"flex","align-items-center","justify-content-center"],["severity","error"],["pTemplate",""],[1,"flex","align-items-center","justify-content-center","cursor-pointer"],["pRipple","",1,"flex","align-items-center","justify-content-center","w-full","h-4rem","max-w-20rem","bg-blue-500","border-round-md","shadow-8","text-white","font-bold",3,"click"],[1,"fa-solid","fa-home"],[1,"text-center","text-xl","mx-2"],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(e,s){if(1&e&&(t.YNc(0,A,27,10,"div",0),t.YNc(1,B,8,0,"ng-template",null,1,t.W1O)),2&e){const n=t.MAs(2);t.Q6J("ngIf",s.permission.setting.self)("ngIfElse",n)}},directives:[c.O5,x.a,C.Rn,u.JJ,u.On,b.Hq,y.H,S.V,g.jx],styles:[""]}),i})()}];let J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[r.Bz.forChild(F)],r.Bz]}),i})();var I=o(6939);let W=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[c.ez,J,I.m]]}),i})()}}]);