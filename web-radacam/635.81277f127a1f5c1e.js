"use strict";(self.webpackChunkweb_radacam=self.webpackChunkweb_radacam||[]).push([[635],{635:(R,d,a)=>{a.r(d),a.d(d,{SettingModule:()=>I});var c=a(9808),r=a(8753),e=a(5e3),g=a(8215),h=a(6254),m=a(9783),p=a(5330),v=a(5431),_=a(9269),f=a(8386),x=a(7658),C=a(7010),u=a(2382),b=a(1208),M=a(845),y=a(5787),E=a(97);const T=["divBound"],S=["divTable"],w=["divPaginator"];function Z(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onUpdate()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",!t.has_change)}}function A(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onCancel()}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",!t.has_change)}}function B(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2,3),e.NdJ("resize",function(){return e.CHM(t),e.oxw().onWindowResize()},!1,e.Jf7),e.TgZ(2,"div",4),e._UZ(3,"p-breadcrumb",5),e.TgZ(4,"div",6)(5,"h3",7),e._UZ(6,"i",8),e._uU(7,"C\xe1c C\xe0i \u0111\u1eb7t "),e.qZA()(),e.TgZ(8,"div",9,10)(10,"div",11)(11,"div",12)(12,"label",13),e._uU(13,"Th\u1eddi gian l\u01b0u tr\u1eef d\u1eef li\u1ec7u t\u1ed1i \u0111a (ng\xe0y): "),e.qZA(),e.TgZ(14,"p-inputNumber",14),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().data_log_time=i})("onInput",function(){return e.CHM(t),e.oxw().onChange()}),e.qZA()(),e.TgZ(15,"div",12)(16,"label",13),e._uU(17,"Bi\xean \u0111\u1ed9 th\u1eddi gian l\u01b0u video T+/- (gi\xe2y): "),e.qZA(),e.TgZ(18,"p-inputNumber",15),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().event_video_radius=i})("onInput",function(){return e.CHM(t),e.oxw().onChange()}),e.qZA()(),e.TgZ(19,"div",16)(20,"p-checkbox",17),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().violate_event_video=i})("change",function(){return e.CHM(t),e.oxw().onChange()}),e.qZA(),e.TgZ(21,"label",18),e._uU(22,"Cho ph\xe9p l\u01b0u video s\u1ef1 ki\u1ec7n vi ph\u1ea1m"),e.qZA()(),e.TgZ(23,"div",16)(24,"p-checkbox",19),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().event_photo=i})("change",function(){return e.CHM(t),e.oxw().onChange()}),e.qZA(),e.TgZ(25,"label",20),e._uU(26,"Cho ph\xe9p l\u01b0u \u1ea3nh s\u1ef1 ki\u1ec7n l\u01b0u th\xf4ng"),e.qZA()(),e.TgZ(27,"div",16)(28,"p-checkbox",21),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().event_video=i})("change",function(){return e.CHM(t),e.oxw().onChange()}),e.qZA(),e.TgZ(29,"label",22),e._uU(30,"Cho ph\xe9p l\u01b0u video s\u1ef1 ki\u1ec7n l\u01b0u th\xf4ng"),e.qZA()()()()(),e.TgZ(31,"div",23,24)(33,"div",25)(34,"div",26),e.YNc(35,Z,1,1,"button",27),e.YNc(36,A,1,1,"button",28),e.qZA(),e._UZ(37,"div",29)(38,"div",30),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("model",t.pathLinks)("home",t.homeLink),e.xp6(11),e.Q6J("ngModel",t.data_log_time)("min",1)("max",365),e.xp6(4),e.Q6J("ngModel",t.event_video_radius)("min",1)("max",10),e.xp6(2),e.Q6J("ngModel",t.violate_event_video)("binary",!0)("disabled",t.event_video),e.xp6(4),e.Q6J("ngModel",t.event_photo)("binary",!0),e.xp6(4),e.Q6J("ngModel",t.event_video)("binary",!0),e.xp6(7),e.Q6J("ngIf",t.permission.setting.update),e.xp6(1),e.Q6J("ngIf",t.permission.setting.update)}}function H(n,s){1&n&&(e._UZ(0,"i",40),e.TgZ(1,"span",41),e._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),e.qZA())}function J(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"p-messages",34),e.YNc(2,H,3,0,"ng-template",35),e.qZA()(),e.TgZ(3,"div",36)(4,"div",37),e.NdJ("click",function(){return e.CHM(t),e.oxw().onGoBackHome()}),e._UZ(5,"span",38),e.TgZ(6,"span",39),e._uU(7,"Quay l\u1ea1i Trang ch\u1ee7"),e.qZA()()()}}const D=[{path:"",component:(()=>{class n{constructor(t,o,i,l,N,W,U,Q){this.cHttpService=t,this.messageService=o,this.renderer=i,this.dialogService=l,this.permissionService=N,this.router=W,this.confirmService=U,this.userService=Q,this.has_change=!1,this.checked=!0,this.loading=!1}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}setStyleDiv(){this.windowWidth=this.divBound.nativeElement.offsetWidth,this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-62}px`)}ngAfterViewInit(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}calcWidth(){let t="";return t=this.windowWidth<576?.95*this.windowWidth+"px":this.windowWidth>=576&&this.windowWidth<768?.55*this.windowWidth+"px":this.windowWidth>=768&&this.windowWidth<992?.45*this.windowWidth+"px":this.windowWidth>=992&&this.windowWidth<1400?.4*this.windowWidth+"px":.3*this.windowWidth+"px",t}ngOnInit(){this.myAccount=this.userService.getUserFromStorage(),this.subPermission=this.permissionService.currentPermission.subscribe(t=>{t&&(this.permission=t,this.initForm(),this.fetchDetail())})}initForm(){this.pathLinks=[{label:"Qu\u1ea3n l\xfd",disabled:!0},{label:"C\xe0i \u0111\u1eb7t",disabled:!0}],this.homeLink={icon:"fa-solid fa-home",routerLink:"/"}}fetchDetail(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.cHttpService.getDetail(this.myAccount.company_id).subscribe({next:t=>{200===t.status?(this.company=t.metadata,this.data_log_time=this.company.data_log_time,this.event_photo=this.company.event_photo,this.event_video=this.company.event_video,this.violate_event_video=this.company.violate_event_video,this.event_video_radius=this.company.event_video_radius,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)):2===t.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${t.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t.message),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime))},error:t=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onChange(){this.has_change=!0,this.event_video&&(this.violate_event_video=!0)}onUpdate(){this.cHttpService.config(this.company._id,this.data_log_time,this.event_photo,this.event_video,this.violate_event_video,this.event_video_radius).subscribe({next:t=>{200===t.status?(this.has_change=!1,this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 t\u1ea1o c\u1eadp nh\u1eadt c\xe0i \u0111\u1eb7t th\xe0nh c\xf4ng!"})):2===t.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${t.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t.message))},error:t=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",t),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onCancel(){this.fetchDetail(),this.has_change=!1}onGoBackHome(){this.router.navigate(["/"])}onComeback(){localStorage.removeItem(g.o.USER),sessionStorage.removeItem(g.o.ACC),this.router.navigate(["/come-back"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.n),e.Y36(m.ez),e.Y36(e.Qsj),e.Y36(p.xA),e.Y36(v.$),e.Y36(r.F0),e.Y36(_.I),e.Y36(f.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-setting-management"]],viewQuery:function(t,o){if(1&t&&(e.Gf(T,5,e.SBq),e.Gf(S,5,e.SBq),e.Gf(w,5,e.SBq)),2&t){let i;e.iGM(i=e.CRH())&&(o.divBound=i.first),e.iGM(i=e.CRH())&&(o.divTable=i.first),e.iGM(i=e.CRH())&&(o.divPaginator=i.first)}},decls:3,vars:2,consts:[["class","relative h-full w-full",3,"resize",4,"ngIf","ngIfElse"],["noPermission",""],[1,"relative","h-full","w-full",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],["styleClass","text-sm p-1",3,"model","home"],[1,"flex","align-items-center"],[1,"text-blue-700","m-0","px-2","pt-2","pb-0"],[1,"fa-solid","fa-list","mr-2"],[1,"page-content","mt-1","border-top-1","border-gray-300"],["divTable",""],[1,"p-fluid","m-2"],[1,"field","mb-2"],["for","name"],["mode","decimal","placeholder","\u0110i\u1ec1n th\u1eddi gian l\u01b0u tr\u1eef 1->365 ng\xe0y",3,"ngModel","min","max","ngModelChange","onInput"],["mode","decimal","placeholder","\u0110i\u1ec1n bi\xean \u0111\u1ed9 th\u1eddi gian l\u01b0u video t\u1eeb 1->10 gi\xe2y",3,"ngModel","min","max","ngModelChange","onInput"],[1,"field-checkbox"],["inputId","violate_event_video",3,"ngModel","binary","disabled","ngModelChange","change"],["for","violate_event_video"],["inputId","event_photo",3,"ngModel","binary","ngModelChange","change"],["for","event_photo"],["inputId","event_video",3,"ngModel","binary","ngModelChange","change"],["for","event_video"],[1,"absolute","bottom-0","left-0","w-full","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],["pButton","","pRipple","","type","button","label","C\u1eadp nh\u1eadt","icon","fa-solid fa-edit","class","mx-1",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times","class","mr-1",3,"disabled","click",4,"ngIf"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","label","C\u1eadp nh\u1eadt","icon","fa-solid fa-edit",1,"mx-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"mr-1",3,"disabled","click"],[1,"flex","align-items-center","justify-content-center"],["severity","error"],["pTemplate",""],[1,"flex","align-items-center","justify-content-center","cursor-pointer"],["pRipple","",1,"flex","align-items-center","justify-content-center","w-full","h-4rem","max-w-20rem","bg-blue-500","border-round-md","shadow-8","text-white","font-bold",3,"click"],[1,"fa-solid","fa-home"],[1,"text-center","text-xl","mx-2"],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(t,o){if(1&t&&(e.YNc(0,B,39,17,"div",0),e.YNc(1,J,8,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.permission.setting.self)("ngIfElse",i)}},directives:[c.O5,x.a,C.Rn,u.JJ,u.On,b.XZ,M.Hq,y.H,E.V,m.jx],styles:[""]}),n})()}];let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.Bz.forChild(D)],r.Bz]}),n})();var F=a(8772);let I=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,k,F.m]]}),n})()}}]);