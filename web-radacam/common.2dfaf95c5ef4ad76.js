"use strict";(self.webpackChunkweb_radacam=self.webpackChunkweb_radacam||[]).push([[592],{6254:(T,h,o)=>{o.d(h,{n:()=>P});var t=o(520),m=o(2340),f=o(5e3);let P=(()=>{class g{constructor(l){this.http=l}getList(l,p,n){let a=new t.LE;return a=a.append("limit",p),a=a.append("offset",n),l&&(a=a.append("company_id",l)),this.http.get(`${m.N.url.BASE_URL}/company`,{params:a})}getDetail(l){return this.http.get(`${m.N.url.BASE_URL}/company/${l}`)}create(l,p){let n=new t.LE;return n=n.append("name",l),p&&(n=n.append("description",p)),this.http.post(`${m.N.url.BASE_URL}/company`,n)}edit(l,p,n){let a=new t.LE;return p&&(a=a.append("name",p)),n&&(a=a.append("description",n)),this.http.put(`${m.N.url.BASE_URL}/company/${l}`,a)}config(l,p,n,a,s,u){let c=new t.LE;return p&&(c=c.append("data_log_time",p)),(null!=n||null!=n)&&(c=c.append("event_photo",n)),(null!=a||null!=a)&&(c=c.append("event_video",a)),(null!=s||null!=s)&&(c=c.append("violate_event_video",s)),u&&(c=c.append("event_video_radius",u)),this.http.put(`${m.N.url.BASE_URL}/company/config/${l}`,c)}delete(l){return this.http.delete(`${m.N.url.BASE_URL}/company/${l}`)}}return g.\u0275fac=function(l){return new(l||g)(f.LFG(t.eN))},g.\u0275prov=f.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},9269:(T,h,o)=>{o.d(h,{I:()=>p});var t=o(5e3),m=o(5330),f=o(9808),P=o(845),g=o(5787);let v=(()=>{class n{constructor(s,u){this.ref=s,this.config=u,this.icon="pi pi-info-circle"}ngOnInit(){this.config.data&&(this.message=this.config.data.message,this.icon=this.config.data.icon)}accept(){this.ref.close(!0)}dismiss(){this.ref.destroy()}}return n.\u0275fac=function(s){return new(s||n)(t.Y36(m.E7),t.Y36(m.S))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirm-dialog"]],decls:8,vars:2,consts:[[1,"diag"],[1,"outbound"],[1,"content","flex","align-items-center","p-2"],[1,"mx-3",2,"font-size","2rem",3,"ngClass"],[1,"footer","flex","align-items-center","justify-content-end"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","pi pi-times",1,"p-button-outlined","mr-1",3,"click"],["pButton","","pRipple","","type","button","label","C\xf3","icon","pi pi-check",1,"mr-1",3,"click"]],template:function(s,u){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return u.dismiss()}),t.qZA(),t.TgZ(7,"button",6),t.NdJ("click",function(){return u.accept()}),t.qZA()()()()),2&s&&(t.xp6(3),t.Q6J("ngClass",u.icon),t.xp6(1),t.hij(" ",u.message," "))},directives:[f.mk,P.Hq,g.H],styles:["@media screen and (max-width: 639.99px){.diag[_ngcontent-%COMP%]{width:99vw}}@media screen and (min-width: 640px) and (max-width: 959.99px){.diag[_ngcontent-%COMP%]{width:75vw}}@media screen and (min-width: 960px) and (max-width: 1365.99px){.diag[_ngcontent-%COMP%]{width:55vw}}@media screen and (min-width: 1366px){.diag[_ngcontent-%COMP%]{width:45vw}}.outbound[_ngcontent-%COMP%]{position:absolute;top:55px;bottom:0;left:0;right:0;overflow:hidden}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:0;bottom:45px;left:0;width:100%;overflow:auto}.outbound[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:45px;left:0;width:100%}"]}),n})(),p=(()=>{class n{constructor(s){this.dialogService=s}confirm(s){return new Promise((u,c)=>{const E=this.dialogService.open(v,{header:s.header,data:{message:s.message,icon:s.icon},height:"200px",contentStyle:{padding:"0",margin:0}});E.onClose.subscribe(b=>{b&&u(b)}),E.onDestroy.subscribe(()=>c(!1))})}}return n.\u0275fac=function(s){return new(s||n)(t.LFG(m.xA))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},4416:(T,h,o)=>{o.d(h,{L:()=>w});var t=o(5e3),m=o(8215),f=o(5330),P=o(1489),g=o(9783),v=o(8753),l=o(845),p=o(5787),n=o(8952),a=o(9808),s=o(4132),u=o(97);const c=["divBound"],E=["divTable"],b=["divPaginator"];function y(d,_){1&d&&(t.TgZ(0,"tr")(1,"th",23),t._uU(2,"#"),t.qZA(),t._UZ(3,"th",23),t.TgZ(4,"th",24),t._uU(5,"T\xean "),t._UZ(6,"p-sortIcon",25),t.qZA(),t.TgZ(7,"th",26),t._uU(8,"M\xf4 t\u1ea3"),t.qZA(),t.TgZ(9,"th",27),t._uU(10,"Khu \u0111\xf4 th\u1ecb"),t.qZA(),t.TgZ(11,"th",27),t._uU(12,"Khu ch\u1ee9c n\u0103ng"),t.qZA()())}const S=function(d){return{"background-color":d}};function O(d,_){if(1&d&&(t.TgZ(0,"tr",28)(1,"td",23),t._uU(2),t.qZA(),t.TgZ(3,"td",23),t._UZ(4,"p-tableRadioButton",29),t.qZA(),t.TgZ(5,"td",30),t._uU(6),t.qZA(),t.TgZ(7,"td",26),t._uU(8),t.qZA(),t.TgZ(9,"td",27),t._uU(10),t.qZA(),t.TgZ(11,"td",27),t._uU(12),t.qZA()()),2&d){const e=_.$implicit,i=_.rowIndex,r=t.oxw();t.Q6J("ngStyle",t.VKq(8,S,r.isIn(e))),t.xp6(2),t.Oqu((r.currentPage-1)*r.itemsPerPage+1+i),t.xp6(2),t.Q6J("value",e)("disabled",r.isDisabled(e)),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Oqu(e.area_name),t.xp6(2),t.Oqu(e.floc_name)}}function D(d,_){1&d&&(t._UZ(0,"i",33),t.TgZ(1,"span",34),t._uU(2,"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp v\xe0o m\u1ee5c n\xe0y!"),t.qZA())}function Z(d,_){1&d&&(t.TgZ(0,"p-messages",31),t.YNc(1,D,3,0,"ng-template",32),t.qZA())}const A=function(){return[15,20,30,50]};let w=(()=>{class d{constructor(e,i,r,C,M,U){this.ref=e,this.config=i,this.sHttpService=r,this.messageService=C,this.renderer=M,this.router=U,this.title="Ch\u1ecdn tr\u1ea1m",this.stations=[],this.selectedStations=[],this.offset=0,this.totalItems=0,this.itemsPerPage=15,this.currentPage=1,this.loading=!1}ngOnDestroy(){this.loadingTime&&clearTimeout(this.loadingTime)}ngAfterViewInit(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-40}px`)}onWindowResize(){this.renderer.setStyle(this.divTable.nativeElement,"height",`  ${this.divBound.nativeElement.offsetHeight-this.divPaginator.nativeElement.offsetHeight-40}px`)}ngOnInit(){this.config.data&&(this.stationIns=this.config.data.station,this.fetchListOfStations())}fetchListOfStations(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.sHttpService.getList(this.itemsPerPage,this.offset).subscribe({next:e=>{200===e.status?(this.stations=e.metadata.docs,this.totalItems=e.metadata.total,this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.loadStatus()):2===e.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${e.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e.message),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime))},error:e=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",e),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}loadStatus(){this.stations.forEach(e=>{e.is_used=!1,this.stationIns&&this.stationIns._id==e._id&&(e.is_used=!0)})}onPageChange(e){this.currentPage=e.page+1,this.itemsPerPage=e.rows,this.offset=(this.currentPage-1)*this.itemsPerPage,this.fetchListOfStations()}onReSync(){this.fetchListOfStations()}onSubmit(){this.ref.close(this.selectedStations)}onDestroy(){this.ref.destroy()}isRowSelectable(e){return!e.data.is_used}isDisabled(e){return!!e.is_used}isIn(e){return e.is_used?"#cae6fc":null}onComeback(){localStorage.removeItem(m.o.USER),sessionStorage.removeItem(m.o.ACC),this.router.navigate(["/come-back"])}}return d.\u0275fac=function(e){return new(e||d)(t.Y36(f.E7),t.Y36(f.S),t.Y36(P.P),t.Y36(g.ez),t.Y36(t.Qsj),t.Y36(v.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-pick-station"]],viewQuery:function(e,i){if(1&e&&(t.Gf(c,5,t.SBq),t.Gf(E,5,t.SBq),t.Gf(b,5,t.SBq)),2&e){let r;t.iGM(r=t.CRH())&&(i.divBound=r.first),t.iGM(r=t.CRH())&&(i.divTable=r.first),t.iGM(r=t.CRH())&&(i.divPaginator=r.first)}},decls:26,vars:17,consts:[[1,"absolute","top-0","left-0","bottom-0","right-0",3,"resize"],["divBound",""],[1,"absolute","top-0","left-0","w-full"],[1,"flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"page-content"],["divTable",""],["styleClass","p-datatable-sm p-datatable-striped","dataKey","_id","scrollHeight","flex",3,"value","selection","selectionPageOnly","rowSelectable","scrollable","loading","selectionChange"],["pTemplate","header"],["pTemplate","body"],[1,"absolute","bottom-0","left-0","w-full","p-1","border-top-1","border-gray-300"],["divPaginator",""],[1,"grid","grid-nogutter"],[1,"col-12","md:col-5","flex","align-items-center"],["pButton","","pRipple","","type","button","label","Ch\u1ecdn","icon","fa-solid fa-check",1,"mr-1",3,"disabled","click"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],[1,"col-12","md:col-5","flex","align-items-center","justify-content-end"],["styleClass","p-0",3,"rows","totalRecords","rowsPerPageOptions","showJumpToPageDropdown","showPageLinks","onPageChange"],[1,"col-12","md:col-2","flex","align-items-center"],["pButton","","pRipple","","type","button","icon","fa-solid fa-sync",1,"p-button-raised","p-button-text",3,"click"],[1,"ml-1"],["noPermission",""],[2,"width","60px","max-width","60px"],["pSortableColumn","name",2,"min-width","200px"],["field","name"],[2,"min-width","300px"],[2,"min-width","150px"],[3,"ngStyle"],[3,"value","disabled"],[2,"min-width","200px"],["severity","error"],["pTemplate",""],[1,"pi","pi-times-circle"],[1,"ml-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0,1),t.NdJ("resize",function(){return i.onWindowResize()},!1,t.Jf7),t.TgZ(2,"div",2)(3,"div",3)(4,"span",4),t._uU(5),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return i.onDestroy()}),t.qZA()(),t.TgZ(7,"div",6,7)(9,"p-table",8),t.NdJ("selectionChange",function(C){return i.selectedStations=C}),t.YNc(10,y,13,0,"ng-template",9),t.YNc(11,O,13,10,"ng-template",10),t.qZA()()(),t.TgZ(12,"div",11,12)(14,"div",13)(15,"div",14)(16,"button",15),t.NdJ("click",function(){return i.onSubmit()}),t.qZA(),t.TgZ(17,"button",16),t.NdJ("click",function(){return i.onDestroy()}),t.qZA()(),t.TgZ(18,"div",17)(19,"p-paginator",18),t.NdJ("onPageChange",function(C){return i.onPageChange(C)}),t.qZA()(),t.TgZ(20,"div",19)(21,"button",20),t.NdJ("click",function(){return i.onReSync()}),t.qZA(),t.TgZ(22,"span",21),t._uU(23),t.qZA()()()()(),t.YNc(24,Z,2,0,"ng-template",null,22,t.W1O)),2&e&&(t.xp6(5),t.Oqu(i.title),t.xp6(4),t.Q6J("value",i.stations)("selection",i.selectedStations)("selectionPageOnly",!0)("rowSelectable",i.isRowSelectable)("scrollable",!0)("loading",i.loading),t.xp6(7),t.Q6J("disabled",!i.selectedStations||0==i.selectedStations.length),t.xp6(3),t.Q6J("rows",i.itemsPerPage)("totalRecords",i.totalItems)("rowsPerPageOptions",t.DdM(16,A))("showJumpToPageDropdown",!0)("showPageLinks",!1),t.xp6(4),t.lnq("Displaying ",(i.currentPage-1)*i.itemsPerPage+1,"-",(i.currentPage-1)*i.itemsPerPage+i.itemsPerPage>i.totalItems?i.totalItems:(i.currentPage-1)*i.itemsPerPage+i.itemsPerPage," of ",i.totalItems,""))},directives:[l.Hq,p.H,n.iA,g.jx,n.lQ,n.fz,a.PC,n.GE,s.D,u.V],styles:[""]}),d})()}}]);