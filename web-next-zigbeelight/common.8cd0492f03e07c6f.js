"use strict";(self.webpackChunkweb_next_zigbeelight=self.webpackChunkweb_next_zigbeelight||[]).push([[592],{6254:(x,b,a)=>{a.d(b,{n:()=>t});var e=a(520),m=a(2340),C=a(5e3);let t=(()=>{class g{constructor(i){this.http=i}getList(i,s){let o=new e.LE;return o=o.append("limit",i),o=o.append("offset",s),this.http.get(`${m.N.url.BASE_URL}/company`,{params:o})}create(i,s,o,n){let _=new e.LE;return _=_.append("name",i),s&&(_=_.append("name_code",s)),o&&(_=_.append("latitude",o)),n&&(_=_.append("longitude",n)),this.http.post(`${m.N.url.BASE_URL}/company`,_)}edit(i,s,o,n,_){let r=new e.LE;return s&&(r=r.append("name",s)),o&&(r=r.append("name_code",o)),n&&(r=r.append("latitude",n)),_&&(r=r.append("longitude",_)),this.http.put(`${m.N.url.BASE_URL}/company/${i}/update-location`,r)}getSetting(){return this.http.get(`${m.N.url.BASE_URL}/company/setting`)}updateSetting(i,s,o,n,_,r,E,D,u,f,y,h,v,l,p,c,L){let d=new e.LE;return s&&(d=d.append("warning_sound",s)),o&&(d=d.append("trouble_device_icon_new",o)),n&&(d=d.append("trouble_device_icon_received",n)),_&&(d=d.append("trouble_device_icon_done",_)),(0==r||1==r)&&(d=d.append("trouble_device_play_sound",r)),E&&(d=d.append("trouble_tt_icon_new",E)),D&&(d=d.append("trouble_tt_icon_received",D)),u&&(d=d.append("trouble_tt_icon_done",u)),(0==f||1==f)&&(d=d.append("trouble_tt_play_sound",f)),y&&(d=d.append("trouble_cd_icon_new",y)),h&&(d=d.append("trouble_cd_icon_received",h)),v&&(d=d.append("trouble_cd_icon_done",v)),(0==l||1==l)&&(d=d.append("trouble_cd_play_sound",l)),p&&(d=d.append("time_set",p)),c&&(d=d.append("power_used_time",c)),L&&(d=d.append("power_used_day",L)),this.http.put(`${m.N.url.BASE_URL}/company/setting/${i}`,d)}getListByGuest(i,s){let o=new e.LE;return o=o.append("limit",i),o=o.append("offset",s),this.http.get(`${m.N.url.BASE_URL}/public/company`,{params:o})}getLogOnOfConfig(){return this.http.get(`${m.N.url.BASE_URL}/log/vin/config/log_time`)}getTimeSentData(){return this.http.get(`${m.N.url.BASE_URL}/company/vin_time_send_data`)}setLogOnOfConfig(i){let s=new e.LE;return i&&(s=s.append("log_expire_time",i)),this.http.put(`${m.N.url.BASE_URL}/log/vin/config/log_time`,s)}setTimeSentData(i){let s=new e.LE;return i&&(s=s.append("time_interval_send_data",i)),this.http.put(`${m.N.url.BASE_URL}/company/vin_time_send_data`,s)}}return g.\u0275fac=function(i){return new(i||g)(C.LFG(e.eN))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},6290:(x,b,a)=>{a.d(b,{N:()=>t});var e=a(520),m=a(2340),C=a(5e3);let t=(()=>{class g{constructor(i){this.http=i}getVAW(i,s,o,n,_){let r=new e.LE;return i&&(r=r.append("device_id",i)),s&&o&&(r=r.append("time_start",s),r=r.append("time_end",o)),r=r.append("limit",n),r=r.append("offset",_),this.http.get(`${m.N.url.BASE_URL}/log/vaw`,{params:r})}getDisconnected(i,s,o){let n=new e.LE;return s&&o&&(n=n.append("time_start",s),n=n.append("time_end",o)),i&&(n=n.append("device_subtype_id",i)),this.http.get(`${m.N.url.BASE_URL}/device/disconnected`,{params:n})}getOnOff(i,s,o,n,_){let r=new e.LE;return r=r.append("limit",n),r=r.append("offset",_),s&&o&&(r=r.append("time_start",s),r=r.append("time_end",o)),i&&(r=r.append("device_id",i)),this.http.get(`${m.N.url.BASE_URL}/log/onoff`,{params:r})}getDeviceHistory(i,s,o,n){let _=new e.LE;return s&&o&&(_=_.append("time_start",s),_=_.append("time_end",o)),i&&0!==i.length&&i.forEach(r=>{_=_.append("device_ids[]",r)}),n&&0!==n.length&&n.forEach(r=>{_=_.append("time[]",r)}),this.http.get(`${m.N.url.BASE_URL}/log/vaw_time`,{params:_})}}return g.\u0275fac=function(i){return new(i||g)(C.LFG(e.eN))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2852:(x,b,a)=>{a.d(b,{z:()=>t});var e=a(520),m=a(2340),C=a(5e3);let t=(()=>{class g{constructor(i){this.http=i}getAll(){return this.http.get(`${m.N.url.BASE_URL}/map`)}getList(i,s,o){let n=new e.LE;return i>=0&&(n=n.append("type",i)),n=n.append("limit",s),n=n.append("offset",o),this.http.get(`${m.N.url.BASE_URL}/map`,{params:n})}getMapDetail(i){return this.http.get(`${m.N.url.BASE_URL}/map/${i}`)}showHideMapLayer(i,s){let o=new e.LE;return o=o.append("selected",s),this.http.put(`${m.N.url.BASE_URL}/map/${i}/select`,o)}create(i,s,o){let n=new e.LE;return n=n.append("name",i),s&&(n=n.append("description",s)),n=n.append("type",o),this.http.post(`${m.N.url.BASE_URL}/map`,n)}edit(i,s,o){let n=new e.LE;return s&&(n=n.append("name",s)),o&&(n=n.append("description",o)),this.http.put(`${m.N.url.BASE_URL}/map/${i}`,n)}delete(i){return this.http.delete(`${m.N.url.BASE_URL}/map/${i}`)}getListDeviceOnMapLayer(i,s,o){let n=new e.LE;return n=n.append("map_id",i),n=n.append("limit",s),n=n.append("offset",o),this.http.get(`${m.N.url.BASE_URL}/device`,{params:n})}getListTroubleOfMap(i,s,o){let n=new e.LE;return n=n.append("map_id",i),n=n.append("limit",s),n=n.append("offset",o),this.http.get(`${m.N.url.BASE_URL}/trouble`,{params:n})}}return g.\u0275fac=function(i){return new(i||g)(C.LFG(e.eN))},g.\u0275prov=C.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},5758:(x,b,a)=>{a.d(b,{AS:()=>e,gm:()=>T,ou:()=>s});class e{}class T{}class s{}},7301:(x,b,a)=>{a.d(b,{L:()=>h});var e=a(2382),m=a(8215),C=a(5297),t=a(5e3),g=a(5330),T=a(6015),i=a(9783),s=a(9979),o=a(845),n=a(5787),_=a(1424),r=a(7010),E=a(9808),D=a(5034);function u(v,l){1&v&&(t.TgZ(0,"div"),t._uU(1," *C\u1ea7n \u0111i\u1ec1n Ti\u1ec1n t\u1ed1 t\xean."),t.qZA())}function f(v,l){1&v&&(t.TgZ(0,"div"),t._uU(1," *Ti\u1ec1n t\u1ed1 t\xean d\xe0i \xedt nh\u1ea5t 4 k\xfd t\u1ef1."),t.qZA())}function y(v,l){if(1&v&&(t.TgZ(0,"small",23),t.YNc(1,u,2,0,"div",24),t.YNc(2,f,2,0,"div",24),t.qZA()),2&v){const p=t.oxw();t.xp6(1),t.Q6J("ngIf",p.formGroup.controls.prefix.invalid),t.xp6(1),t.Q6J("ngIf",p.formGroup.controls.prefix.errors.minlength)}}let h=(()=>{class v{constructor(p,c,L,d,M,S,O){this.ref=p,this.config=c,this.formBuilder=L,this.dHttpService=d,this.messageService=M,this.dialogService=S,this.router=O,this.title="Th\xeam m\u1edbi m\u1ed9t s\u1ed1 l\u01b0\u1ee3ng Thi\u1ebft b\u1ecb",this.loading=!1}ngOnDestroy(){this.loadingTime&&clearTimeout(this.loadingTime)}ngOnInit(){this.formGroup=this.formBuilder.group({device_subtype:[{value:"",disabled:!0},[e.kI.required]],count:[1],prefix:["",[e.kI.required,e.kI.minLength(4)]]}),this.config.data&&(this.deviceSubtypeId=this.config.data.deviceSubtypeId,this.deviceSubtypeName=this.config.data.deviceSubtypeName?this.config.data.deviceSubtypeName:"",this.latitude=this.config.data.latlng?this.config.data.latlng.lat:void 0,this.longitude=this.config.data.latlng?this.config.data.latlng.lng:void 0,this.formGroup.setValue({device_subtype:this.deviceSubtypeName,count:1,prefix:""}))}onSubmit(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.dHttpService.createNumberOfDevices(this.deviceSubtypeId,this.formGroup.value.count,this.formGroup.value.prefix,this.latitude,this.longitude).subscribe({next:p=>{0===p.status?(this.messageService.add({severity:"success",summary:"Th\xe0nh c\xf4ng",detail:"\u0110\xe3 t\u1ea1o Ph\xe2n lo\u1ea1i th\xe0nh c\xf4ng"}),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime),this.ref.close("success")):2===p.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${p.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",p.message),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime))},error:p=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",p),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onDestroy(){this.ref.destroy()}selectDeviceSubtype(){this.dialogService.open(C._,{data:{deviceSubtypeIns:[],title:"Ch\u1ecdn lo\u1ea1i thi\u1ebft b\u1ecb",has_multi_selection:!1,disabled_nodes:[]},showHeader:!1,height:"99vh",width:"99vw",contentStyle:{padding:"0",margin:0}}).onClose.subscribe(c=>{c&&(this.deviceSubtypeId=c.id,this.deviceSubtypeName=c.name,this.formGroup.controls.device_subtype.setValue(this.deviceSubtypeName))})}onComeback(){localStorage.removeItem(m.o.USER),sessionStorage.removeItem(m.o.ACC),this.router.navigate(["/come-back"])}}return v.\u0275fac=function(p){return new(p||v)(t.Y36(g.E7),t.Y36(g.S),t.Y36(e.qu),t.Y36(T.x),t.Y36(i.ez),t.Y36(g.xA),t.Y36(s.F0))},v.\u0275cmp=t.Xpm({type:v,selectors:[["app-create-device"]],decls:29,vars:8,consts:[[3,"formGroup","ngSubmit"],[1,"outbound"],[1,"header","flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","text-xl","font-bold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"content"],[1,"p-fluid","p-2"],[1,"field","mb-2"],["for","device_subtype"],[1,"p-inputgroup"],["id","device_subtype","type","text","pInputText","","formControlName","device_subtype"],["type","button","pButton","","pRipple","","icon","fa-solid fa-list",3,"click"],["for","numof"],["formControlName","count","mode","decimal","inputId","numof","placeholder","Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng t\u1eeb 1-500",3,"showButtons","min","max"],[1,"field","mb-0"],["for","name"],[1,"ml-2","text-red-500"],["id","name","type","text","aria-describedby","name-help","pInputText","","formControlName","prefix"],["id","name-help","class","text-red-500",4,"ngIf"],[1,"footer","flex","align-items-center","justify-content-end","border-top-1","border-gray-300"],["pButton","","pRipple","","type","button","label","H\u1ee7y b\u1ecf","icon","fa-solid fa-times",1,"p-button-outlined","mr-1",3,"click"],["pButton","","pRipple","","type","submit","label","L\u01b0u th\xf4ng tin","icon","fa-solid fa-floppy-disk",1,"mr-1",3,"disabled"],[3,"show"],["id","name-help",1,"text-red-500"],[4,"ngIf"]],template:function(p,c){1&p&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return c.onSubmit()}),t.TgZ(1,"div",1)(2,"div",2)(3,"span",3),t._uU(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){return c.onDestroy()}),t.qZA()(),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),t._uU(10,"Lo\u1ea1i thi\u1ebft b\u1ecb"),t.qZA(),t.TgZ(11,"div",9),t._UZ(12,"input",10),t.TgZ(13,"button",11),t.NdJ("click",function(){return c.selectDeviceSubtype()}),t.qZA()()(),t.TgZ(14,"div",7)(15,"label",12),t._uU(16,"S\u1ed1 l\u01b0\u1ee3ng"),t.qZA(),t._UZ(17,"p-inputNumber",13),t.qZA(),t.TgZ(18,"div",14)(19,"label",15),t._uU(20,"Ti\u1ec1n t\u1ed1 (T\xean)"),t.TgZ(21,"span",16),t._uU(22,"(*)"),t.qZA()(),t._UZ(23,"input",17),t.YNc(24,y,3,2,"small",18),t.qZA()()(),t.TgZ(25,"div",19)(26,"button",20),t.NdJ("click",function(){return c.onDestroy()}),t.qZA(),t._UZ(27,"button",21),t.qZA()(),t._UZ(28,"ngx-loading",22),t.qZA()),2&p&&(t.Q6J("formGroup",c.formGroup),t.xp6(4),t.Oqu(c.title),t.xp6(13),t.Q6J("showButtons",!0)("min",1)("max",500),t.xp6(7),t.Q6J("ngIf",c.formGroup.controls.prefix.invalid&&c.formGroup.controls.prefix.touched),t.xp6(3),t.Q6J("disabled",c.formGroup.invalid||!c.deviceSubtypeId),t.xp6(1),t.Q6J("show",c.loading))},directives:[e._Y,e.JL,e.sg,o.Hq,n.H,e.Fj,_.o,e.JJ,e.u,r.Rn,E.O5,D.RJ],styles:[".outbound[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden}.outbound[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:45px}.outbound[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{position:absolute;top:45px;bottom:45px;left:0;width:100%;overflow:auto}.outbound[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{position:absolute;bottom:0;height:45px;left:0;width:100%}"]}),v})()},229:(x,b,a)=>{a.d(b,{F:()=>y});var e=a(5e3),m=a(8215),C=a(9783),t=a(2852),g=a(5431),T=a(9979),i=a(845),s=a(5787),o=a(8952),n=a(1208),_=a(2382);const r=["header"],E=["content"];function D(h,v){1&h&&(e.TgZ(0,"tr")(1,"th",12),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",13),e._uU(4,"Hi\u1ec3n th\u1ecb"),e.qZA(),e.TgZ(5,"th",14),e._uU(6,"T\xean "),e._UZ(7,"p-sortIcon",15),e.qZA()())}function u(h,v){if(1&h){const l=e.EpF();e.TgZ(0,"tr",16)(1,"td",12),e._uU(2),e.qZA(),e.TgZ(3,"td",13)(4,"p-checkbox",17),e.NdJ("ngModelChange",function(c){return e.CHM(l).$implicit.is_displayed=c})("onChange",function(c){const d=e.CHM(l).$implicit;return e.oxw().onChangeDisplay(c,d)}),e.qZA()(),e.TgZ(5,"td",18),e._uU(6),e.qZA()()}if(2&h){const l=v.$implicit,p=v.rowIndex,c=e.oxw();e.Q6J("pSelectableRow",l),e.xp6(2),e.Oqu(p+1),e.xp6(2),e.Q6J("ngModel",l.is_displayed)("binary",!0)("disabled",!c.permission.editor_map_layer.change_display),e.xp6(2),e.AsE("",l.name," (#",l.id,")")}}function f(h,v){1&h&&(e.TgZ(0,"div",19),e._uU(1," Kh\xf4ng c\xf3 d\u1eef li\u1ec7u trong m\u1ee5c n\xe0y. "),e.qZA())}let y=(()=>{class h{constructor(l,p,c,L,d){this.messageService=l,this.mlHttpService=p,this.renderer=c,this.permissionService=L,this.router=d,this.closeEvent=new e.vpe,this.layerChange=new e.vpe,this.mapLayers=[],this.loading=!1}ngOnDestroy(){this.subPermission&&this.subPermission.unsubscribe(),this.loadingTime&&clearTimeout(this.loadingTime)}setStyleDiv(){this.renderer.setStyle(this.content.nativeElement,"top",`  ${this.header.nativeElement.offsetHeight}px`)}ngAfterViewChecked(){this.setStyleDiv()}onWindowResize(){this.setStyleDiv()}ngOnInit(){this.subPermission=this.permissionService.currentPermission.subscribe(l=>{l&&(this.permission=l,this.fetchListOfMapLayers())})}onClose(){this.closeEvent.emit("close")}fetchListOfMapLayers(){this.loadingTime=setTimeout(()=>{this.loading=!0},1e3),this.mlHttpService.getList(0,999999,0).subscribe({next:l=>{0===l.status?(this.mapLayers=l.data.rows,this.mapLayers.forEach(p=>p.is_displayed=!!p.selected),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)):2===l.status?this.onComeback():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${l.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",l.message),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime))},error:l=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",l),this.loading=!1,this.loadingTime&&clearTimeout(this.loadingTime)}})}onChangeDisplay(l,p){this.mlHttpService.showHideMapLayer(p.id,l.checked?1:0).subscribe({next:c=>{0===c.status?this.onLayerChange():(this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:`${c.message}`}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",c.message))},error:c=>{this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i"}),console.error("C\xf3 l\u1ed7i x\u1ea3y ra",c)}})}onLayerChange(){let l=[];this.mapLayers.forEach(p=>{p.is_displayed&&l.push(p.id)}),this.layerChange.emit(l)}onComeback(){localStorage.removeItem(m.o.USER),sessionStorage.removeItem(m.o.ACC),this.router.navigate(["/come-back"])}}return h.\u0275fac=function(l){return new(l||h)(e.Y36(C.ez),e.Y36(t.z),e.Y36(e.Qsj),e.Y36(g.$),e.Y36(T.F0))},h.\u0275cmp=e.Xpm({type:h,selectors:[["app-map-layer-control"]],viewQuery:function(l,p){if(1&l&&(e.Gf(r,5,e.SBq),e.Gf(E,5,e.SBq)),2&l){let c;e.iGM(c=e.CRH())&&(p.header=c.first),e.iGM(c=e.CRH())&&(p.content=c.first)}},outputs:{closeEvent:"closeEvent",layerChange:"layerChange"},decls:13,vars:3,consts:[[1,"relative","h-full","w-full",3,"resize"],[1,"absolute","top-0","left-0","w-full"],["header",""],[1,"flex","align-items-center","justify-content-between","border-bottom-1","border-gray-300"],[1,"ml-2","font-semibold"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-danger","p-button-text",3,"click"],[1,"absolute","bottom-0","left-0","w-full","p-0"],["content",""],["styleClass","p-datatable-sm p-datatable-striped","scrollHeight","flex",3,"value","scrollable","loading"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[2,"width","60px","max-width","60px"],[2,"min-width","100px"],["pSortableColumn","name",2,"min-width","400px"],["field","name"],[3,"pSelectableRow"],["inputId","binary",3,"ngModel","binary","disabled","ngModelChange","onChange"],[2,"min-width","400px"],[1,"p-fluid","p-2"]],template:function(l,p){1&l&&(e.TgZ(0,"div",0),e.NdJ("resize",function(){return p.onWindowResize()},!1,e.Jf7),e.TgZ(1,"div",1,2)(3,"div",3)(4,"span",4),e._uU(5,"C\xe1c l\u1edbp b\u1ea3n \u0111\u1ed3"),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return p.onClose()}),e.qZA()()(),e.TgZ(7,"div",6,7)(9,"p-table",8),e.YNc(10,D,8,0,"ng-template",9),e.YNc(11,u,7,7,"ng-template",10),e.YNc(12,f,2,0,"ng-template",11),e.qZA()()()),2&l&&(e.xp6(9),e.Q6J("value",p.mapLayers)("scrollable",!0)("loading",p.loading))},directives:[i.Hq,s.H,o.iA,C.jx,o.lQ,o.fz,o.Ei,n.XZ,_.JJ,_.On],styles:[""]}),h})()},2304:(x,b,a)=>{a.d(b,{H:()=>r});var e=a(5e3),m=a(9783),C=a(5330),t=a(7443),g=a(9808),T=a(845),i=a(5787);function s(E,D){1&E&&(e.TgZ(0,"div",12)(1,"span",13),e._uU(2,"H\u01b0\u1edbng khung camera v\xe0o m\xe3 QR \u0111\u1ec3 qu\xe9t"),e.qZA()())}function o(E,D){if(1&E){const u=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(u),e.oxw().onToggleFlash()}),e.qZA()}if(2&E){const u=e.oxw();e.Q6J("disabled",!u.torchAvailable)}}function n(E,D){if(1&E){const u=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){return e.CHM(u),e.oxw().onToggleCamera()}),e.qZA()}if(2&E){const u=e.oxw();e.Q6J("disabled",u.devices.length<=1)}}function _(E,D){if(1&E&&(e.TgZ(0,"div",16)(1,"div",17)(2,"span",18),e._uU(3),e.qZA()()()),2&E){const u=e.oxw();e.xp6(3),e.Oqu(u.no_camera_msg)}}let r=(()=>{class E{constructor(u,f){this.messageService=u,this.ref=f,this.devices=[],this.torch=!1,this.scannerEnabled=!1,this.torchAvailable=!1,this.camera_index=0,this.no_camera_msg=""}ngOnInit(){}onHasPermission(u){this.hasPermission=u,0==this.hasPermission?(this.no_camera_msg="Kh\xf4ng c\xf3 Camera",this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Truy c\u1eadp Camera b\u1ecb ch\u1eb7n. T\xednh n\u0103ng qu\xe9t m\xe3 QR kh\xf4ng th\u1ec3 s\u1eed d\u1ee5ng."})):null==this.hasPermission&&(this.no_camera_msg="Kh\xf4ng c\xf3 Camera",this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Kh\xf4ng t\xecm th\u1ea5y camera. H\u1ec7 th\u1ed1ng kh\xf4ng \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."}))}camerasNotFoundHandler(u){u&&(this.no_camera_msg="Kh\xf4ng c\xf3 Camera",this.messageService.add({severity:"warn",summary:"C\u1ea3nh b\xe1o",detail:"Kh\xf4ng c\xf3 camera t\u01b0\u01a1ng th\xedch."}))}onCamerasFound(u){this.devices=u,setTimeout(()=>{this.checkDesireCamera()},1e3)}onTorchCompatible(u){this.torchAvailable=u}onToggleFlash(){this.torch=!this.torch}onToggleCamera(){this.camera_index+=1,this.camera_index==this.devices.length&&(this.camera_index=0),this.desiredDevice=this.devices[this.camera_index]}checkDesireCamera(){this.camera_index=this.devices.indexOf(this.desiredDevice),this.scannerEnabled=!0}scanSuccessHandler(u){this.scannerEnabled=!1,this.desiredDevice=null,this.ref.close(u)}scanErrorHandler(u){this.hasPermission&&u&&this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra khi qu\xe9t m\xe3."})}scanFailureHandler(u){this.hasPermission&&u&&this.messageService.add({severity:"error",summary:"L\u1ed7i",detail:"C\xf3 l\u1ed7i x\u1ea3y ra khi qu\xe9t m\xe3."})}onDestroy(){this.ref.destroy()}}return E.\u0275fac=function(u){return new(u||E)(e.Y36(m.ez),e.Y36(C.E7))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-qr-scanner"]],decls:13,vars:7,consts:[[1,"relative","h-full","w-full","bg-white","border-round-xl"],[1,"title","flex","align-items-center","justify-content-center"],[1,"text-lg","font-bold","ml-2"],[1,"cam","absolute","flex","justify-content-center"],[3,"enable","device","torch","deviceChange","torchCompatible","permissionResponse","camerasFound","camerasNotFound","scanSuccess","scanError"],[1,"cmd","absolute"],["class","absolute top-0 w-full flex justify-content-center",4,"ngIf"],[1,"absolute","bottom-0","w-full","p-2","flex","align-items-center","justify-content-between",2,"height","45px"],["pButton","","pRipple","","type","button","icon","fa-solid fa-bolt-lightning","class","p-button-rounded p-button-text","styleClass","p-button-sm",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-sync","class","p-button-rounded p-button-text","styleClass","p-button-sm",3,"disabled","click",4,"ngIf"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-text",3,"click"],["class","no-camera absolute",4,"ngIf"],[1,"absolute","top-0","w-full","flex","justify-content-center"],[1,"text-sm","text-white","m-2"],["pButton","","pRipple","","type","button","icon","fa-solid fa-bolt-lightning","styleClass","p-button-sm",1,"p-button-rounded","p-button-text",3,"disabled","click"],["pButton","","pRipple","","type","button","icon","pi pi-sync","styleClass","p-button-sm",1,"p-button-rounded","p-button-text",3,"disabled","click"],[1,"no-camera","absolute"],[1,"absolute","h-full","w-full","flex","align-items-center","justify-content-center"],[1,"text-2xl","font-bold"]],template:function(u,f){1&u&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3,"Qu\xe9t m\xe3 Thi\u1ebft b\u1ecb"),e.qZA()(),e.TgZ(4,"div",3)(5,"zxing-scanner",4),e.NdJ("deviceChange",function(h){return f.desiredDevice=h})("torchCompatible",function(h){return f.onTorchCompatible(h)})("permissionResponse",function(h){return f.onHasPermission(h)})("camerasFound",function(h){return f.onCamerasFound(h)})("camerasNotFound",function(h){return f.camerasNotFoundHandler(h)})("scanSuccess",function(h){return f.scanSuccessHandler(h)})("scanError",function(h){return f.scanErrorHandler(h)}),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,s,3,0,"div",6),e.TgZ(8,"div",7),e.YNc(9,o,1,1,"button",8),e.YNc(10,n,1,1,"button",9),e.TgZ(11,"button",10),e.NdJ("click",function(){return f.onDestroy()}),e.qZA()()(),e.YNc(12,_,4,1,"div",11),e.qZA()),2&u&&(e.xp6(5),e.Q6J("enable",f.scannerEnabled)("device",f.desiredDevice)("torch",f.torch),e.xp6(2),e.Q6J("ngIf",f.hasPermission),e.xp6(2),e.Q6J("ngIf",f.hasPermission),e.xp6(1),e.Q6J("ngIf",f.hasPermission),e.xp6(2),e.Q6J("ngIf",!f.hasPermission||null==f.hasPermission))},directives:[t.S,g.O5,T.Hq,i.H],styles:["[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%]  video{width:300px;height:300px;object-fit:fill;border-radius:10px}.title[_ngcontent-%COMP%]{top:0;height:45px;left:0;right:0;z-index:3000}.cam[_ngcontent-%COMP%]{top:45px;bottom:0;left:0;right:0;z-index:3000}.cmd[_ngcontent-%COMP%]{top:45px;bottom:0;left:0;right:0;z-index:3500}.no-camera[_ngcontent-%COMP%]{top:45px;bottom:45px;left:0;right:0;z-index:3600}"]}),E})()}}]);